import Layout from 'lib/components/layout'
import {} from '@zeit-ui/react'

export const meta = {
  title: '[Rails] 6.0.3.7 -> 6.1.4 ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰',
  date: '2021-07-02T07:29:12.012Z',
  description: '',
  image: '',
}

# ã¯ã˜ã‚ã«

ç¾åœ¨æ‹…å½“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ Rails ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’è¡Œã£ãŸã®ã§ã€å‚™å¿˜éŒ²ã€‚

## å‚è€ƒè¨˜äº‹

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å‹ã‚‹ã‚‚ã®ã¯ãªã„ã®ã§ã€åŸºæœ¬çš„ã«ã¯ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰ã‚’å‚è€ƒã«ã—ãŸã€‚

- [Rails ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰](https://railsguides.jp/upgrading_ruby_on_rails.html)

Railsã‚¬ã‚¤ãƒ‰ã«ã¯ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«å¤‰æ›´ç‚¹ã‚„è¿½åŠ æ©Ÿèƒ½ãŒã¨ã¦ã‚‚è©³ç´°ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€å¿…èª­ã€‚

- [Ruby on Rails 6.1 ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ](https://railsguides.jp/6_1_release_notes.html)

æ›´ã«è©³ã—ãçŸ¥ã‚ŠãŸã„å ´åˆã€ä»Šå›ã§ã‚ã‚Œã° ActiveStorage é–¢é€£ã®å¤‰æ›´ãŒãã“ãã“ã‚ã£ãŸã®ã§ã€CHANGELOG ã‚‚ä½µã›ã¦èª­ã‚€ã“ã¨ã§å¤‰æ›´ç‚¹ã‚’æ•´ç†ã—ãŸã€‚

- [ActiveStorage CHANGELOG.md](https://github.com/rails/rails/blob/6-1-stable/activestorage/CHANGELOG.md)

å…¬å¼ã§ã¯ãªã„ãŒã€ãƒã‚§ãƒªãƒ¼æœ¬ã§æœ‰åãªä¼Šè—¤æ·³ä¸€ã•ã‚“ã®Qiitaè¨˜äº‹ã‚‚ç°¡æ½”ã«ã¾ã¨ã¾ã£ã¦ãŠã‚Šã€å‚è€ƒã«ã—ãŸã€‚

- [æ°¸ä¹…ä¿å­˜ç‰ˆï¼ï¼Ÿä¼Šè—¤ã•ã‚“å¼ãƒ»Railsã‚¢ãƒ—ãƒªã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †](https://qiita.com/jnchito/items/0ee47108972a0e302caf)

## æ‰‹é †

å„æ‰‹é †ã‚’å®Ÿæ–½å¾Œã«ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸã‚Šã€æ–°ãŸãªè­¦å‘ŠãŒå‡ºã‚‹å ´åˆã¯ä¿®æ­£ã‚³ãƒŸãƒƒãƒˆã‚’ç©ã‚€ã€‚
æ¬¡ã®æ‰‹é †ã¸ã®ç§»è¡Œå‰ã«å¿…ãšå®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹ã€‚ï¼ˆåŸå› ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹ãŸã‚ï¼‰

1. ãƒ†ã‚¹ãƒˆãŒå…¨ã¦ãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚
- pending ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒ44ä»¶ã‚ã£ãŸã®ã§ã€ã“ã®ã‚¿ã‚¹ã‚¯ã«å–ã‚Šæ›ã‹ã‚‹å‰ã«å…¨ã¦è§£æ¶ˆã•ã›ãŸã€‚
- æ”¾ç½®ã•ã‚Œã¦ã„ãŸ warning ã‚‚å°‘ãªã‹ã‚‰ãšã‚ã£ãŸãŸã‚ã€äº‹å‰ã«å¯¾å¿œã€‚
2. `bundle update -g development -g test` ã§ gem ã®ãƒ‘ãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æœ€æ–°ã«ã™ã‚‹ã€‚
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æŒ‡å®šã¯åŸºæœ¬çš„ã«å¤–ã™ã€‚
- `bundle outdated` ã§æœ€æ–°ã§ã¯ãªã„ gem ãŒä¸€è¦§ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚
3. `bundle update` ã§ Rails ä»¥å¤–ã® gem ã‚’æœ€æ–°ã«ã™ã‚‹
- webpacker ãŒ `4.0.7` ã§ã‚ã‚Šã€å·®åˆ†ãŒå¤§ãããªã‚Šãã†ã ã£ãŸã®ã¨ã€ä»Šå›ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã«å¿…é ˆã§ã¯ãªã‹ã£ãŸãŸã‚ã€åˆ¥ã®PRã«åˆ‡ã‚Šå‡ºã—ãŸã€‚
- ã“ã®æ™‚ç‚¹ã§ã¾ãšãƒ†ã‚¹ãƒˆãŒèµ°ã‚‰ãªã„äº‹æ…‹ãŒç™ºç”Ÿã€‚[gem active_interaction](https://github.com/AaronLasseigne/active_interaction) ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ãŸã“ã¨ã«ã‚ˆã‚‹ä»•æ§˜å¤‰æ›´ãŒç›´æ¥çš„ãªåŸå› ã€‚
  - è©²å½“ç®‡æ‰€ã‚’ä¿®æ­£å¾Œã€ä»–ã«257ä»¶ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒå¤±æ•—ã€‚æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ä½¿ã„æ–¹ãŒé–“é•ã£ã¦ã„ãŸãŒã€gem ã®ä»•æ§˜ãŒå³æ ¼ã«ãªã£ãŸã“ã¨ã§é–“é•ã£ã¦ã„ã‚‹ç®‡æ‰€ãŒä¸€æ–‰ã«ãƒ‘ã‚¹ã—ãªããªã£ãŸã€‚æ„šç›´ã«ä¿®æ­£ã€‚
4. Rails ã®ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚‹ã€‚ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã®ç¢ºèªã€‚
-  `6.0.3.7` -> `6.0.4` ã®å¤‰æ›´ã€‚
5. æ¬¡ã®ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æœ€æ–°ãƒ‘ãƒƒãƒã«ç§»è¡Œã€‚
- `6.0.4` -> `6.1.4` ã®å¤‰æ›´ã€‚
  - ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã‚‹ã¨ warning å¢—ãˆãŸã®ã§å¯¾å‡¦ã€‚
6. `rails app:update` ã‚’å®Ÿè¡Œã€‚

```shell
Overwrite /project/config/application.rb? (enter "h" for help) [Ynaqdh]
```

- ä»¥ä¸Šã®è¡¨ç¤ºãŒç¹°ã‚Šè¿”ã•ã‚Œã‚‹ã®ã§ã€åŸºæœ¬çš„ã«ã¯ `d` ã§ Diff ã‚’ç¢ºèªã—ã€ `Y` ã§ä¸Šæ›¸ãå®Ÿè¡Œã€‚
  - ã‚³ãƒãƒ³ãƒ‰å®Œäº†å¾Œã€ä¸Šæ›¸ãã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†åº¦ Diff ã‚’è¦‹ãªãŒã‚‰æ‰‹ç›´ã—ã§ä¿®æ­£ã€‚
7. æœ€å¾Œã«é–‹ç™ºç’°å¢ƒãƒ»ãƒ‡ãƒ¢ç’°å¢ƒã§å‹•ä½œç¢ºèªã€‚ã§ãã‚Œã°è¤‡æ•°äººã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å—ã‘ã‚‹ã€‚

## æœ€å¾Œã«

- gem ã¯ä¾¿åˆ©ãªã‚‚ã®ãŒå¤šã„ä¸€æ–¹ã§ã€ä»Šå›ã¯å¯†çµåˆã«ãªã£ã¦ã„ãŸãŸã‚ã«å¯¾å¿œã«éå¸¸ã«è‹¦åŠ´ã—ãŸã€‚ä¸€é•·ä¸€çŸ­ã€‚
- ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—ã«ã‚ˆã‚‹å·®åˆ†ã¯éå¸¸ã«å¤§ãããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€çŠ¶æ³ã«å¿œã˜ã¦é©åˆ‡ãªç²’åº¦ã§PRã‚’åˆ†å‰²ã—ãŸã»ã†ãŒã‚ˆã•ãã†ã€‚ï¼ˆä»Šå› Webpacker ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯åˆ¥PRã«åˆ†ã‘ãŸã€‚ï¼‰
  
  åˆ†å‰²ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é€†ã«ãƒ¬ãƒ“ãƒ¥ãƒ¯ãƒ¼ãŒæ··ä¹±ã™ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã¨æ€ã†ã®ã§æ³¨æ„ãŒå¿…è¦ã€‚
- `rails app:update` ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒçµæ§‹æ›¸ãæ›ã‚ã‚‹ã®ã§æ…é‡ã«ã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å¿µå…¥ã‚Šã«é ¼ã‚€ã®ã‚‚ good
- å¤§å¤‰ãªã‚¿ã‚¹ã‚¯ã ã£ãŸã‘ã©ã€è‡ªåˆ†ã§ã‚¿ã‚¹ã‚¯ã‚’å–ã‚Šã«è¡Œã£ã¦æœ¬å½“ã«ã‚ˆã‹ã£ãŸã€‚
  - ä½¿ã‚ã‚Œã¦ã‚‹ gem ã®ä»•æ§˜ã®ç†è§£ãŒã‹ãªã‚Šæ·±ã¾ã£ãŸã—ã€Rails ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ç†è§£ã‚‚æ·±ã¾ã£ãŸã€‚
  - è‡ªåˆ†ã®ä¸­ã® OSS ã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿ã«ã„ããƒãƒ¼ãƒ‰ãƒ«ãŒä¸‹ãŒã£ãŸã€‚
  - ãƒ†ã‚¹ãƒˆæ™‚ã‚„ `yarn install` ã€å„ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã®ãƒ­ã‚°ç­‰ã® warning ãŒæ ¼æ®µã«æ¸›ã£ã¦ç¶ºéº—ã«ãªã£ãŸã€‚
- Rails ã‚¬ã‚¤ãƒ‰ã‚’ã¯ã˜ã‚ã€å¤šãã®æƒ…å ±ãŒã‚ã‹ã‚Šã‚„ã™ãã¾ã¨ã¾ã£ãŸè¨˜äº‹ã‚’è¤‡æ•°å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã®ã§ã€ã¨ã¦ã‚‚ã‚ã‚ŠãŒãŸã„â€¦ğŸ™

ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯å„ªå…ˆåº¦ãŒãã“ã¾ã§é«˜ãè¦‹ç©ã‚‚ã‚‰ã‚Œãªã„å‚¾å‘ã«ã‚ã‚‹ãŒã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ç¶™ç¶šçš„ã«æ”¹å–„ã—ã¦ã„ãä¸Šã§ã¯é¿ã‘ã¦é€šã‚Œãªã„ã—ã€æ—©ã‚ã«å–ã‚Šçµ„ã‚“ã ã»ã†å—ã‘ã‚‹æ©æµã‚‚å¤šã„ã ã‚ã†ãªã¨å®Ÿæ„Ÿã—ãŸã€‚

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
