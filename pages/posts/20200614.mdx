import Layout from 'lib/components/layout'
import { Link } from '@zeit-ui/react'

export const meta = {
  title: '[Next.js] Headã‚¿ã‚°å†…ã®ã‚¿ã‚°é‡è¤‡ã‚’é˜²ã',
  date: '2020-06-14T08:28:13.461Z',
  description: '',
  image: '',
}

## çµè«–

é‡è¤‡ã‚’é¿ã‘ãŸã„ã‚¿ã‚°ã« `key` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã€åŒåã®ã‚­ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚

``` javascript
import Head from 'next/head'

function IndexPage() {
  return (
    <div>
      <Head>
        <title>My page title</title>
        <meta property="og:title" content="My page title" key="title" />
      </Head>
      <Head>
        <meta property="og:title" content="My new title" key="title" />
      </Head>
      <p>Hello world!</p>
    </div>
  )
}

export default IndexPage
```

ã“ã¡ã‚‰ã®ã‚³ãƒ¼ãƒ‰ã®å ´åˆã€é‡è¤‡ã—ã¦ã„ã‚‹metaã‚¿ã‚°ã®ã†ã¡å¾Œè€…ã®ã¿ãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚

<Link href="https://nextjs.org/docs/api-reference/next/head" icon color target="_blank">next/head</Link>
<Link href="https://github.com/vercel/next.js/pull/5800" icon color target="_blank">Dedupe only items with unique key #5800</Link>

<br />

### èƒŒæ™¯

å½“ãƒ–ãƒ­ã‚°ã¯ã€ãƒ–ãƒ­ã‚°ã«é–¢ã™ã‚‹æƒ…å ±ã¯ `pages/_app.tsx` ã®Headã‚¿ã‚°å†…ã«ã€ãƒ–ãƒ­ã‚°è¨˜äº‹ã”ã¨ã®æƒ…å ±ã¯ `lib/components/layout.tsx` ã®Headã‚¿ã‚°å†…ã«ãƒ¡ã‚¿æƒ…å ±ã¨ã—ã¦è¨­å®šã—ã¦ã‚ã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€metaã‚¿ã‚°ã® `key` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ãªã‹ã£ãŸãŸã‚ã€`og:title` ç­‰ã®[OGP](https://ogp.me/)ã«é–¢ã™ã‚‹metaã‚¿ã‚°ãŒé‡è¤‡ã—ã¦ãŠã‚Šã€ä¾‹ãˆã°Slackãƒãƒ£ãƒ³ãƒãƒ«ã«ãƒ–ãƒ­ã‚°è¨˜äº‹ã®ãƒªãƒ³ã‚¯ã‚’è²¼ã‚Šä»˜ã‘ãŸéš›ã«ã€å„è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ç­‰ã®ãƒ¡ã‚¿æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚

<br />

### ãã®ä»–ã®æ–¹æ³•

<Link href="https://github.com/nfl/react-helmet" icon color target="_blank">nfl / react-helmet</Link>

ã“ã¡ã‚‰ã®react-helmetã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã‚‚è§£æ±ºã§ããã†ã§ã™ã€‚

Headã‚¿ã‚°å†…ã®metaã‚¿ã‚°ãŒé‡è¤‡ã—ãŸå ´åˆã€ãƒã‚¹ãƒˆã—ã¦ã„ã‚‹å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¿ã‚°ã‚’parseã—ã¾ã™ã€‚

ä½¿ã„æ–¹ã‚‚ç°¡å˜ã§ã€

``` javascript
import React from "react";
import {Helmet} from "react-helmet";

class Application extends React.Component {
  render () {
    return (
        <div className="application">
            <Helmet>
                <meta charSet="utf-8" />
                <title>My Title</title>
                <link rel="canonical" href="http://mysite.com/example" />
            </Helmet>
            ...
        </div>
    );
  }
};
```

ã“ã®ã‚ˆã†ã«å¯¾è±¡ã®ã‚¿ã‚°ã‚’ `<Helmet>` ã§å›²ã‚€ã ã‘ã§å¯¾å¿œã—ã¦ãã‚Œã¾ã™ã€‚

ãŸã ã€Nextãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è©¦ã—ã¦ã¿ãŸã¨ã“ã‚ã€

``` shell
Unhandled Runtime Error
TypeError: Cannot read property 'tagName' of null
```

ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã—ã¾ã„ãƒ“ãƒ«ãƒ‰ã§ããªã‹ã£ãŸã§ã™ã€‚

<Link href="https://github.com/vercel/next.js/tree/canary/examples/with-react-helmet" icon color target="_blank">react-helmet example</Link>

Next.jsã®å ´åˆã¯ã“ã¡ã‚‰ã®ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã‚’å‚è€ƒã«ã™ã‚‹ã¨å®Ÿç¾ã§ããã†ã§ã™ğŸ’ª

ã¨ã¯ã„ãˆã€Next.jsã®å ´åˆã¯æœ€åˆã®ã‚„ã‚Šæ–¹ã§å¯¾å‡¦ã—ã¦ãã‚Œã‚‹ã®ã§ã€ `react-helmet` ã‚’ä½¿ã†å¿…è¦ã¯ãªã•ãã†ã§ã™ã€‚


export default ({ children }) => <Layout meta={meta}>{children}</Layout>
